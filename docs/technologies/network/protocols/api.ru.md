# API протоколы

Сравнение протоколов API даст вам:

- **Понимание различий**: Вы сможете определить сильные и слабые стороны каждого протокола.
- **Выбор оптимального решения**: Вы сможете выбрать наиболее подходящий протокол для ваших задач.
- **Улучшение навыков**: Вы получите ценный практический опыт работы с различными протоколами.

## Общее сравнение характеристик

### SOAP

Техническая характеристика

- Формат данных: XML
- Транспортный протокол: HTTP (иногда SMTP, TCP)
- Архитектурный стиль: RPC (Remote Procedure Call)
- Скорость и эффективность: Обычно медленнее из-за XML и транспортных накладных расходов.
- Компактность данных: Менее компактный из-за XML.
- Версионность: Хорошо поддерживает версии.

Общие характеристики

- Популярность: Все еще используется, но популярность снижается.
- Сложность: Сложнее REST в реализации.
- Инструментарий: Достаточно инструментов, но многие устарели.

Подходит для систем с высокой степенью безопасности, где требуется надежная версионность.

### REST

Техническая характеристика

- Формат данных: JSON, XML (реже).
- Транспортный протокол: HTTP.
- Архитектурный стиль: RESTful (Resource-oriented).
- Скорость и эффективность: Достаточно быстро, особенно при использовании HTTP/2.
- Компактность данных: Более компактный, чем XML.
- Версионность: Рекомендовано использовать версионные URI.

Общие характеристики

- Популярность: Самый популярный.
- Сложность: Прост в использовании и реализации.
- Инструментарий: Широкий выбор инструментов и библиотек.

Идеально подходит для простых, ресурсно-ориентированных API, где скорость не является критичной.

### gRPC

Техническая характеристика

- Формат данных: protobuf (бинарный формат).
- Транспортный протокол: HTTP/2.
- Архитектурный стиль: RPC (Remote Procedure Call).
- Скорость и эффективность: Самый быстрый, благодаря бинарному формату и HTTP/2.
- Компактность данных: Очень компактный из-за бинарного формата protobuf.
- Версионность: Поддерживает версионные службы, но требует дополнительной работы.

Общие характеристики

- Популярность: Набирает популярность, особенно в микросервисной архитектуре.
- Сложность: Более сложен в реализации, но обеспечивает высокую производительность.
- Инструментарий: Меньше инструментов, но выбор увеличивается.

Лучший выбор для высокопроизводительных API, где скорость и эффективность критически важны.

### GraphQL

Техническая характеристика

- Формат данных: JSON
- Транспортный протокол: HTTP
- Архитектурный стиль: Query language
- Скорость и эффективность:  Зависит от запросов, может быть медленнее, чем REST или gRPC, но при правильной реализации может быть быстрее.
- Компактность данных: Достаточно компактный, но может быть больше, чем JSON, в зависимости от запроса.
- Версионность: Поддерживает версии схемы, но требует дополнительных усилий.

Общие характеристики

- Популярность: Набирает популярность, особенно для фронтенд-разработки.
- Сложность: Довольно сложен в реализации, но дает больше контроля над данными.
- Инструментарий: Развивающаяся экосистема инструментов.

Идеален для API, где требуется гибкость запросов и доступ к данным.

## Инструменты и библиотеки в .NET 6+

### SOAP

- System.ServiceModel: Встроенный в .NET Framework, предоставляет поддержку SOAP-сервисов.
- WCF (Windows Communication Foundation): Широко используемая библиотека для создания SOAP-сервисов, работает как в .NET Framework, так и в .NET Core.

### REST

- ASP.NET Core: Основная платформа для создания web-приложений и REST API.
- System.Net.Http: Класс для работы с HTTP-запросами.
- HttpClientFactory: Предоставляет управление жизненным циклом клиентов HTTP.

### gRPC

- Grpc.AspNetCore: Библиотека для создания gRPC-сервисов в ASP.NET Core.
- Google.Protobuf: Библиотека для работы с protobuf.

### GraphQL

- GraphQL.NET: Популярная библиотека для реализации GraphQL-сервисов в .NET.
- HotChocolate: Еще одна библиотека для GraphQL в .NET, с расширенными возможностями.

## Требования к тестовым сервисам

### Общие требования

- **Простая структура**: Сервисы должны быть максимально простыми, чтобы сосредоточиться на тестировании протокола.
- **Базовые функции**: Каждый сервис должен реализовывать базовые функции (например, получение списка пользователей, добавление пользователя, обновление, удаление).
- **Разнообразные типы данных**: Используйте различные типы данных (строки, числа, даты) для тестирования передачи данных.
- **Логирование**: Включите логирование для отслеживания запросов и ответов.
- **Документация**: Создайте четкую документацию с описанием API и функций.

### Примеры сервисов

- **Сервис пользователя**: Реализует основные операции с пользователями.
- **Сервис продуктов**: Реализует операции с продуктами (добавление, обновление, получение информации).
- **Сервис заказов**: Реализует операции с заказами.
